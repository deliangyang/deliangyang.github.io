## SQL 注入攻击

### SQL未转义注入

#### 正常请求
- name = lucky

```sql
mysql> select * from t_new where name = 'lucky' limit 1;
+-------+-------+----------+---------------------+--------+
| id    | name  | birth    | create_time         | status |
+-------+-------+----------+---------------------+--------+
| 90001 | lucky | 20170724 | 2021-03-31 18:19:29 | 9      |
+-------+-------+----------+---------------------+--------+
```

#### 攻击1，验证是否可以注入
- name = lucky' or 1 = '1
```sql
mysql> select * from t_new where name = 'lucky' or 1 = '1' limit 1;
+-------+-------+----------+---------------------+--------+
| id    | name  | birth    | create_time         | status |
+-------+-------+----------+---------------------+--------+
| 90001 | lucky | 20170724 | 2021-03-31 18:19:29 | 9      |
+-------+-------+----------+---------------------+--------+
```

#### 攻击2
- name = lucky' union select * from t_new where id = '90002' limit 2;--
- 如上攻击就可以把整个表脱下来，俗称“脱裤”
```sql
mysql> select * from t_new where name = 'lucky' union select * from t_new where id = '90002' limit 2;--' limit 1;
+-------+-------+----------+---------------------+--------+
| id    | name  | birth    | create_time         | status |
+-------+-------+----------+---------------------+--------+
| 90001 | lucky | 20170724 | 2021-03-31 18:19:29 | 9      |
| 90002 | lucky | 20170724 | 2021-03-31 18:19:29 | 9      |
+-------+-------+----------+---------------------+--------+
2 rows in set (0.00 sec)

    '>
```

### 解决方案
- PDO
- 过滤，转义等