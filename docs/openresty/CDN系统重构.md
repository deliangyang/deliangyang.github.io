> 我们需要的是 完善的用户系统，子用户及相关权限，然后 预付费 后付费的扣费，我们目前是融合的百度的CDN，后续可能会考虑融合腾讯的，这样的话两个CDN平台怎么做一个整合

## 接口文档编写
> 自己知道有这些流程即可，员工流动性不可控，方便维护交接
- 自动化管理接口文档
- 通用结构定义
- 功能模块开发
    - 数据库设计（用户表、配置表等怎么设计）
    - 依赖的数据结构（比如用到了Redis、消息中间件之类的）
    - 逻辑编写（如何实现的，怎么实现的，数据怎么查SQL，数据走向等）

## 用户系统

### 子用户系统
- 添加子账号（子账号不允许注册）
    - 余额、账单金额
    - 各类指标：流量、域名数量、使用流量
- 根据功能模块创建角色
    - Rbac权限管理，用户-角色-权限控制，参考[http://www.woshipm.com/pd/1150093.html](http://www.woshipm.com/pd/1150093.html)
- 角色开通接口权限，下发签名秘钥等

## CDN 厂商
- 一处添加，多处使用
    - 厂商的管理，其实就是规则的管理，哪些域名在哪个厂商下，哪个配置在哪个厂商下
- `CDN厂商提供的接口其实差不多，代码层面上确定好interface（接口）`，功能如下
    - 域名管理
        - 添加、修改、删除域名
    - SSL证书管理
        - SSL证书，上传、删除、创建免费证书
    - 缓存管理
        - 刷新CDN，删除缓存
        - 设置规则
    - WAF管理
    - 日志下载、统计数据查询

## 计费
- 预付费
    - 微信支付
    - 支付宝支付
- 按量计费
    - 钱包充值
- 账单
    - 预付费账单
    - 每月按量后付费账单
        - 账单支付状态管理
        - 可充值、可支付

## 数据统计
- top5 IP
- 流量消耗曲线图
- top10 URL
- 错误统计、状态码统计等

## 日志管理
- 归档日志下载
    - 统一定义好日志结构，方便清洗
- 日志查询（可延迟）

## 商务合作，接口SDK开发
为了吸引开发，方便客户自动化运维，考虑开放部分接口方便客户自动管理自己的CDN，制定接口签名规则

### SDK类型
- PHP
- Java

### 功能
- 刷新CDN
    - 缓存预取
- 归档日志下载
- 域名管理
    - 添加
    - 修改
    - 删除
    - SSL证书管理
- 白名单，黑名单添加
- 统计数据查询