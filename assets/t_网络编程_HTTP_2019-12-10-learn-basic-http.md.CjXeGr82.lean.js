import{_ as i,c as a,a3 as n,o as l}from"./chunks/framework.BOyF8YV7.js";const E=JSON.parse('{"title":"深入理解HTTP协议及缓存策略","description":"本文详细介绍了HTTP协议的报文结构，包括请求行、请求头部、响应体等组成部分，以及HTTP缓存策略，例如Private Cache、Public Cache、Cache-control、缓存过期机制和缓存验证等内容，并提供了HTTP状态码的分类说明。","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://blog.ranchulin.com/t/网络编程/HTTP/2019-12-10-learn-basic-http.html"}],["meta",{"property":"og:title","title":"深入理解HTTP协议及缓存策略"}],["meta",{"property":"og:url","content":"https://blog.ranchulin.com/t/网络编程/HTTP/2019-12-10-learn-basic-http.html"}],["meta",{"name":"keywords","content":"HTTP,HTTP协议,HTTP报文,请求行,请求头部,响应体,状态码,HTTP缓存,Cache-Control,缓存策略,max-age,must-revalidate,no-cache,no-store,CDN,Private Cache,Public Cache,HTTP/1.1,HTTP/2.0"}]]},"headers":[],"relativePath":"t/网络编程/HTTP/2019-12-10-learn-basic-http.md","filePath":"t/网络编程/HTTP/2019-12-10-learn-basic-http.md","lastUpdated":1736299776000}'),e={name:"t/网络编程/HTTP/2019-12-10-learn-basic-http.md"};function t(h,s,p,k,r,c){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="http-协议" tabindex="-1">HTTP 协议 <a class="header-anchor" href="#http-协议" aria-label="Permalink to &quot;HTTP 协议&quot;">​</a></h2><h3 id="http-协议报文结构" tabindex="-1">HTTP 协议报文结构 <a class="header-anchor" href="#http-协议报文结构" aria-label="Permalink to &quot;HTTP 协议报文结构&quot;">​</a></h3><ul><li><code>&gt;</code> 表示客户请求的消息结构</li><li><code>&lt;</code> 表示服务端响应数据，包含 <code>{ [1027 bytes data]</code>的数据</li><li>请求行和请求头部以 <code>\\r\\n</code> 分隔，请求数据与请求头部以 <code>\\r\\n\\r\\n</code> 分隔</li><li>请求行之后是请求头部（即 http header），header 之后是请求数据，请求数据过大，会以多个数据包传输（这是 TCP/IP 范畴，这里就不详细介绍）</li><li>请求行结构 <ul><li>请求方法 GET/POST/HEAD/PUT/PATCH/OPTIONS/DELETE/CONNECT/TRACE</li><li>请求路径 URL</li><li>协议版本 HTTP/1.0、HTTP/1.1、HTTP/2.0</li></ul></li><li>响应体结构 <ul><li>状态行 <ul><li>协议版本</li><li>状态码：200、403、404 ... <ul><li>状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别： <ul><li>1xx：指示信息--表示请求已接收，继续处理</li><li>2xx：成功--表示请求已被成功接收、理解、接受</li><li>3xx：重定向--要完成请求必须进行更进一步的操作</li><li>4xx：客户端错误--请求有语法错误或请求无法实现</li><li>5xx：服务器端错误--服务器未能实现合法的请求</li></ul></li></ul></li><li>状态消息：OK、Forbidden、Not Found</li></ul></li><li>消息状态</li><li>空白行 <code>\\r\\n\\r\\n</code></li><li>响应正文</li></ul></li></ul><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">phantom:~</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ydl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -sv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://www.sourcedev.cc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">head</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Rebuilt URL to: http://www.sourcedev.cc/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   Trying 42.192.78.57...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TCP_NODELAY set</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Connected to www.sourcedev.cc (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">42.192.78.57</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) port 80 (#0)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HTTP/1.1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Host: www.sourcedev.cc</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> User-Agent: curl/7.54.0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Accept: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HTTP/1.1 200 OK</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Server: openresty/1.19.3.1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date: Mon, 12 Jul 2021 16:21:13 GMT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Content-Type: text/html; charset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">UTF-8</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Transfer-Encoding: chunked</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Connection: keep-alive</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> X-Powered-By: PHP/7.3.27</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Set-Cookie: ndj__Session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">l7v5pn34h1qhavqv86bcahvdqs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Expires: Thu, 19 Nov 1981 08:52:00 GMT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Cache-Control: no-store, no-cache, must-revalidate</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Pragma: no-cache</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1027</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bytes data]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DOCTYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> htm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">html</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">head</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="http-cache-策略" tabindex="-1">HTTP Cache 策略 <a class="header-anchor" href="#http-cache-策略" aria-label="Permalink to &quot;HTTP Cache 策略&quot;">​</a></h3><ul><li>Private Cache</li><li>Public Cache CDN，中间代理</li><li>Cache-control <ul><li>no-store(禁止缓存)</li><li>no-cache(强制缓存)</li></ul></li><li>缓存过期机制 <ul><li>max-age：过期最大时间</li></ul></li><li>缓存验证确认 <ul><li>must-revalidate 验证状态再选择是否更新</li></ul></li></ul><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ol><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP" target="_blank" rel="nofollow noopener noreferrer">MDN 相关文档</a></li></ol>`,8)]))}const o=i(e,[["render",t]]);export{E as __pageData,o as default};
