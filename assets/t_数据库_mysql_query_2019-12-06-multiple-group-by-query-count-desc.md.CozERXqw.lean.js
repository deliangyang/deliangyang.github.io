import{_ as i,c as a,a3 as n,o as h}from"./chunks/framework.BOyF8YV7.js";const l="data:image/png;base64,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",c=JSON.parse('{"title":"MySQL和PostgreSQL中高效筛选group by后数量最多的列","description":"本文介绍了如何使用MySQL和PostgreSQL的group by语句高效地筛选出分组后数量最多的列，并详细解释了两种数据库的实现方法及思路，包括两次group by操作的原理，以及count函数的用法和性能优化建议。","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://blog.ranchulin.com/t/数据库/mysql/query/2019-12-06-multiple-group-by-query-count-desc.html"}],["meta",{"property":"og:title","title":"MySQL和PostgreSQL中高效筛选group by后数量最多的列"}],["meta",{"property":"og:url","content":"https://blog.ranchulin.com/t/数据库/mysql/query/2019-12-06-multiple-group-by-query-count-desc.html"}],["meta",{"name":"keywords","content":"MySQL,PostgreSQL,group by,SQL,数据库,查询优化,count,聚合函数,分组查询,相同组数量最多,性能优化,视图"}]]},"headers":[],"relativePath":"t/数据库/mysql/query/2019-12-06-multiple-group-by-query-count-desc.md","filePath":"t/数据库/mysql/query/2019-12-06-multiple-group-by-query-count-desc.md","lastUpdated":1736299776000}'),t={name:"t/数据库/mysql/query/2019-12-06-multiple-group-by-query-count-desc.md"};function k(p,s,e,r,E,d){return h(),a("div",null,s[0]||(s[0]=[n('<h2 id="如何通过-group-by-过滤次相同组数量最多的列" tabindex="-1">如何通过 group by 过滤次相同组数量最多的列 <a class="header-anchor" href="#如何通过-group-by-过滤次相同组数量最多的列" aria-label="Permalink to &quot;如何通过 group by 过滤次相同组数量最多的列&quot;">​</a></h2><h3 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h3><p>之前潘同学问了我一个问题，group by 如何刷选出同组个数次数最多的一行，我试了一下，没有找到解决方案，于是就回了他可能需要用函数来解决，但是后来又仔细想了一下，肯定有其他更好的方法，于是接着琢磨了一下。</p><h3 id="过程" tabindex="-1">过程 <a class="header-anchor" href="#过程" aria-label="Permalink to &quot;过程&quot;">​</a></h3><p><img src="'+l+`" alt="img"></p><p>描述： 按照 c1,c2,c3 分组，得到结果集<br> 但是要得到 c4，结果最多那个。</p><h4 id="建表添加测试集" tabindex="-1">建表添加测试集 <a class="header-anchor" href="#建表添加测试集" aria-label="Permalink to &quot;建表添加测试集&quot;">​</a></h4><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 建表语句</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\` (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`c1\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_unicode_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`c2\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_unicode_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`c3\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_unicode_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`c4\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> varchar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> utf8mb4_unicode_ci </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NULL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) ENGINE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InnoDB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CHARSET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf8mb4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">COLLATE=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">utf8mb4_unicode_ci</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 添加测试集</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`t\`</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h4><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c1, c2, c3, c4 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      group by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c1, c2, c3, c4 </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      order by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">desc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dd </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">group by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c1, c2, c3;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="解决问题思路" tabindex="-1">解决问题思路 <a class="header-anchor" href="#解决问题思路" aria-label="Permalink to &quot;解决问题思路&quot;">​</a></h4><ol><li><p>需要做两次<code>group by</code>，第一次 group by 统计出前三项相同的组出现的次数，然后对数量做倒序排列，<code>group by</code>的特点，相同组的数据只取第一条，所以为了拿到数量最多的，我们需要对数量做倒序排列。</p></li><li><p>第二次<code>group by</code>才是真正的拿到数据，相同组的第一条数据</p></li></ol><h3 id="pgsql-的解决方案" tabindex="-1">pgSQl 的解决方案 <a class="header-anchor" href="#pgsql-的解决方案" aria-label="Permalink to &quot;pgSQl 的解决方案&quot;">​</a></h3><p>当时想到 pgsql 其实更好处理这个问题，不用想这个麻烦，异曲同工之妙。<code>WITH .... AS</code>，pgsql 显得更加的强大些。</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WITH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    group by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a, b, c, d </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    order by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">desc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a, b, c, d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> xx </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    group by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a, b, c;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="知识扩展" tabindex="-1">知识扩展 <a class="header-anchor" href="#知识扩展" aria-label="Permalink to &quot;知识扩展&quot;">​</a></h3><ol><li>mysql 中<code>count</code>为什么需要参数，<code>count(1)</code>和<code>count(*)</code>，<code>count(a)</code>有什么区别，其实<code>count(1)</code>和<code>count(*)</code>每什么区别，有区别的是<code>count(a)</code>，它会过滤掉<code>a = NULL</code>的记录， 所有<code>count(a) &lt;= count(1) or count(*)</code></li></ol><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ol><li>MySQl 和 pgSQL 功能是在太强大了，关系查询的特性，帮助我们减少了代码量，提升了工作效率。</li><li>自己对数据库的知识尚且薄弱，仍有很多知识需要学习的。</li><li>如果表的行数特别大的话，可能两次 group by 操作比较耗时，所有我们可以分步骤进行，或者建立视图。</li></ol>`,19)]))}const y=i(t,[["render",k]]);export{c as __pageData,y as default};
